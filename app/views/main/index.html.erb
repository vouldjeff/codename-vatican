<% title "Начало" %>
<% h1(false) %>

<div style="text-align: center;">
  <img src="/images/people.png" height="150px" />
</div>
<br />
<br />
<div class="menu-container">
  <ul class="menu-slider">
      <% @namespaces.each do |namespace| %>
        <li><a data-remote="true" data-add="10" data-color="#eee" href="<%= url_for namespace %>"><%= namespace.get_name %></a></li>
      <% end %>
  </ul>
</div>

<div class="menu-context-container">
  <div class="menu-container">
    <ul class="menu-slider fill-me-up">
    </ul>
  </div>
  <div class="inner-menu-context">
  </div>  
</div>

<script type="text/javascript"> 
  $(document).ready(function() {	
    hideContext();
    
  	var colorOver = '#31b8da';
  	var padLeft = '20px';
  	var padRight = '20px';
  		
  	//Animate the LI on mouse over, mouse out
  	//$('.menu-slider li').click(function(){ return false; });
  	$('.menu-slider li').click(function(){
  	  hideContext();
  		showContext();
  	  
  	  //window.location = $(this).find('a').attr('href');
  	})
  	.live("mouseover", function(){
  		$(this).find('a')
  		.animate( { paddingLeft: padLeft, paddingRight: padRight}, { queue:false, duration:100 } )
  		.animate( { backgroundColor: colorOver }, { queue:false, duration:200 });
  	})
  	.live("mouseout", function(){
  		$(this).find('a')
  		.animate( { paddingLeft: $(this).find('a').attr("data-add"), paddingRight: $(this).find('a').attr("data-add")}, { queue:false, duration:100 } )
  		.animate( { backgroundColor: $(this).find('a').attr("data-color") }, { queue:false, duration:200 });
  	});	
  	
    var ulPadding = 10;
    $('div.menu-container').css({overflow: 'hidden'});
  
    $('div.menu-container').mousemove(function(e){
      var lastLi = $(this).children("ul.menu-slider:first").children("li:last-child");
      var ulHeight = lastLi[0].offsetTop + lastLi.outerHeight() + ulPadding;
  
      var top = (e.pageY - $(this).offset().top) * (ulHeight-$(this).height()) / $(this).height();
      $(this).scrollTop(top);
    });
  });
  
  var hideContext = function(){  
    $('.menu-context-container').stop(true); 
    $(".menu-context-container").hide().css("width", "0px").css("height", "1px").css("margin-top", "143px").css("padding", "0px");
    $(".inner-menu-context").hide(); 
  }
  
  var showContext = function(){
    $(".menu-context-container").show().animate({marginTop: "1px", height: "287px"}, {duration: 1000, complete: function(){ 
      $(".menu-context-container").animate({padding: "5px"}, {duration: 100, complete: function(){
        $(".menu-context-container").animate({ width: "710px"}, {duration: 2000, complete: function(){
          $(".inner-menu-context").fadeIn();
        }
      });
      }
    });
  }});
  }
</script> 